(function(){"use strict";var t={2167:function(t,n,e){var i=e(6369),r=function(){var t=this,n=t._self._c;return n("div",{staticClass:"mb-5 mx-auto"},[n("h1",{staticClass:"mb-5 mt-5 text-center"},[t._v("Сервис сокращения ссылок")]),n("ShortenLinkForm")],1)},o=[],s=function(){var t=this,n=t._self._c;return n("div",[n("b-form",{staticClass:"mb-5 text-center",attrs:{inline:""},on:{submit:function(n){return n.preventDefault(),t.generateShortLink.apply(null,arguments)}}},[n("label",{staticClass:"sr-only",attrs:{for:"input-link"}},[t._v("Ваша ссылка:")]),n("b-form-input",{staticClass:"mb-2 ms-2 me-2 w-50",staticStyle:{display:"inline",width:"auto","vertical-align":"middle"},attrs:{id:"input-link",type:"url",placeholder:"https://example.com",pattern:"https://.*",required:""},model:{value:t.mainLink,callback:function(n){t.mainLink=n},expression:"mainLink"}}),n("b-button",{staticClass:"mb-2",attrs:{type:"submit",variant:"primary"}},[t._v("Создать короткую ссылку")])],1),n("div",{staticClass:"mb-3 text-center"},[t.isFetching?n("div",[n("b-spinner")],1):t._e(),t.shortLink?n("b-form",{attrs:{inline:""}},[n("label",{staticClass:"sr-only",attrs:{for:"shorted-link"}},[t._v("Короткая ссылка:")]),n("b-form-input",{staticClass:"mb-2 ms-2 me-2 w-50",staticStyle:{display:"inline",width:"auto","vertical-align":"middle"},attrs:{id:"shorted-link",type:"text",value:t.shortLink,readonly:""}}),n("b-button",{staticClass:"mb-2",attrs:{id:"copy-btn","data-clipboard-target":"#shorted-link"},on:{click:t.copyToClipboard}},[t._v(t._s(t.isCopied))])],1):t._e()],1),t.shortLink?n("div",{staticClass:"text-center"},[t.screenshot?n("b-img",{staticClass:"w-75",attrs:{src:t.screenshot,alt:"Screenshot",fluid:"",thumbnail:""}}):n("div",[n("b-spinner")],1)],1):t._e()],1)},a=[],l=(e(2062),e(8134)),c=e.n(l),u={data(){return{mainLink:"",shortLink:"",screenshot:null,isCopied:"Копировать",isFetching:!1}},methods:{generateShortLink(){this.isFetching=!0,this.shortLink="",this.screenshot=null,this.checkValidUrl(this.mainLink).then((t=>{!0===t?(fetch("/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mainLink:this.mainLink})}).then((t=>t.json())).then((t=>{this.shortLink="https://link-shortener-production-0bf0.up.railway.app/r/"+t.shortlink,this.putImage(t.id)})).catch((t=>console.log(t))),this.isCopied="Копировать",this.isFetching=!1):this.isFetching=!1}))},putImage(t){fetch(`/putimage/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(""),timeout:6e4}).then((t=>t.blob())).then((t=>{this.screenshot=URL.createObjectURL(t)})).catch((t=>console.log(t)))},copyToClipboard(){new(c())("#copy-btn"),this.isCopied="Скопировано"},checkValidUrl(t){return fetch(t,{mode:"no-cors"}).then((t=>!!t||(alert("Ошибка: эта ссылка никуда не ведет"),!1))).catch((()=>(alert("Ошибка: эта ссылка никуда не ведет"),!1)))}}},h=u,p=e(1001),d=(0,p.Z)(h,s,a,!1,null,null,null),f=d.exports,m={name:"App",components:{ShortenLinkForm:f}},b=m,v=(0,p.Z)(b,r,o,!1,null,null,null),y=v.exports,k=e(6681),g=e(9425);e(7024);i["default"].use(k.XG7),i["default"].use(g.X),i["default"].config.productionTip=!1,new i["default"]({render:t=>t(y)}).$mount("#app")}},n={};function e(i){var r=n[i];if(void 0!==r)return r.exports;var o=n[i]={exports:{}};return t[i].call(o.exports,o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(n,i,r,o){if(!i){var s=1/0;for(u=0;u<t.length;u++){i=t[u][0],r=t[u][1],o=t[u][2];for(var a=!0,l=0;l<i.length;l++)(!1&o||s>=o)&&Object.keys(e.O).every((function(t){return e.O[t](i[l])}))?i.splice(l--,1):(a=!1,o<s&&(s=o));if(a){t.splice(u--,1);var c=r();void 0!==c&&(n=c)}}return n}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[i,r,o]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};e.O.j=function(n){return 0===t[n]};var n=function(n,i){var r,o,s=i[0],a=i[1],l=i[2],c=0;if(s.some((function(n){return 0!==t[n]}))){for(r in a)e.o(a,r)&&(e.m[r]=a[r]);if(l)var u=l(e)}for(n&&n(i);c<s.length;c++)o=s[c],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(u)},i=self["webpackChunkappnew"]=self["webpackChunkappnew"]||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}();var i=e.O(void 0,[998],(function(){return e(2167)}));i=e.O(i)})();
//# sourceMappingURL=app.b33eeba3.js.map